<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Передача показаний</title>
</head>
<body>
    <h2>Форма для передачи показаний</h2>

    <!-- Прямая отправка на GAS, target="_blank" чтобы не перезагружать страницу -->
    <form action="https://script.google.com/macros/s/AKfycbxfrZH25NpFPXp_QhDajcTJb6crVISiXm2A5zdbEdUrHdz7Wis8m5nrAH40NATCagOz/exec">
        <label>ФИО или адрес:<br>
            <input type="text" name="name" required>
        </label><br><br>
        <label>Показания:<br>
            <input type="number" name="reading" required>
        </label><br><br>
        <button type="submit">Отправить</button>
    </form>

    <!-- Скрытый iframe для обработки отправки без перезагрузки -->
    <iframe name="hidden_iframe" style="display:none;"></iframe>

    <p id="status"></p>

    <script>
        // Отслеживаем отправку формы через iframe
        const form = document.querySelector("form");
        const status = document.getElementById("status");

        form.addEventListener("submit", () => {
            status.innerText = "Отправка...";
        });

        // Используем небольшой трюк: после отправки формы на iframe, GAS возвращает текст
        window.addEventListener("message", function(event) {
            if(event.data === "OK") {
                status.innerText = "Успешно отправлено!";
                form.reset();
            }
        }, false);
    </script>
</body>
</html>
